# 场景C：论文中的价格体系完整梳理

## 📋 **概览**

论文《The Economics of Social Data》涉及**两个市场**，因此有**两套价格体系**：
1. **数据市场**（Data Market）：中介 ↔ 消费者 ↔ 生产者
2. **产品市场**（Product Market）：生产者 ↔ 消费者

---

## 🔄 **完整价格流动图**

```
┌─────────────┐                  ┌─────────────┐
│   生产者    │                  │   消费者    │
│ (Producer)  │                  │ (Consumer)  │
└─────────────┘                  └─────────────┘
       │                                │
       │ ③ p_i (产品价格)                │
       │    产品市场                     │
       │ ←─────────────────────────────→ │
       │                                │
       │ ① m_0 (数据购买费)              │ ② m_i (数据补偿)
       │    数据市场                     │    数据市场
       ↓                                ↓
       └──────────→ ┌─────────────┐ ←──┘
                    │  数据中介   │
                    │(Intermediary)│
                    └─────────────┘
```

---

## 💰 **价格1：产品价格 p_i**

### **定义**
生产者向消费者 i 收取的**产品价格**（Product Price）

### **特点**
- **时序**：Stage 4（产品市场交易）
- **决策者**：生产者
- **支付方向**：消费者 → 生产者
- **支付对象**：购买产品的对价

### **定价策略**

#### **个性化定价**（Personalized Pricing, Identified）
```python
# 当 anonymization = "identified" 时
# 生产者知道每个消费者的身份和信号

p_i = (μ_i^producer + c) / 2

其中：
  μ_i^producer = E[w_i | Y_0] = 生产者对消费者i支付意愿的后验期望
  c = 边际成本
```

**论文公式**（Section 2.3）：
- 线性-二次模型下的最优定价
- 提取一半的期望消费者剩余

**代码实现**：
```python
# src/scenarios/scenario_c_social_data.py
if params.anonymization == "identified":
    prices = (mu_producer + params.c) / 2
```

#### **统一定价**（Uniform Pricing, Anonymized）
```python
# 当 anonymization = "anonymized" 时
# 生产者不知道每个消费者的身份

p* = argmax_p Σ_{i=1}^N (p - c) · max(μ_i^producer - p, 0)

其中：
  对所有人收取相同价格 p*
  需要数值优化求解
```

**代码实现**：
```python
if params.anonymization == "anonymized":
    p_optimal, _ = compute_optimal_price_uniform(mu_producer, params.c)
    prices = np.full(N, p_optimal)
```

### **取值范围**
- **下界**：边际成本 c（通常 c=0）
- **上界**：消费者的后验期望 μ_i（超过则不购买）
- **典型值**：μ_i/2 左右（个性化定价）

### **论文中的记号**
- **p_i**：个性化价格
- **p**：统一价格
- **c**：边际成本（外生参数，通常=0）

---

## 💵 **价格2：数据补偿 m_i**

### **定义**
数据中介向参与者 i 支付的**数据补偿**（Data Compensation）

### **特点**
- **时序**：Stage 0（中介设计合同）
- **决策者**：中介
- **支付方向**：中介 → 消费者（参与者）
- **支付对象**：购买消费者数据的对价

### **定价策略**

#### **统一补偿**（Uniform Compensation）
```python
# 论文简化假设：所有消费者相同补偿
m_i = m for all i

# 代码实现
params.m = 1.0  # 外生给定或优化求解
```

**论文中的简化**（Section 5）：
- 为了理论分析简洁，假设所有人补偿相同
- 实际中介可以差异化定价（论文未展开）

#### **差异化补偿**（Differentiated Compensation，论文理论值）
```python
# 论文 Proposition 3（第18页）
# 最优补偿取决于边际信息价值

m_i* = (3/8) · [G(X) - G(X_{-i})]

其中：
  G(X) = 包含消费者i的信息集的价值
  G(X_{-i}) = 不包含消费者i的信息集的价值
  边际贡献 = G(X) - G(X_{-i})
```

**解读**：
- 补偿与数据的边际信息价值成正比
- 在大市场中，单个数据的边际价值递减
- 这解释了"隐私悖论"：个人数据廉价

### **取值范围**
- **下界**：0（无补偿）
- **上界**：理论上无限，但受中介预算约束
- **典型值**：0 - 3.0（代码中的搜索范围）
- **实证值**：0.6 - 1.0（优化结果）

### **论文中的记号**
- **m_i**：向消费者 i 的补偿
- **m**：统一补偿（简化假设）
- **Σ_{i: a_i=1} m_i**：中介的总补偿支出

---

## 💳 **价格3：数据购买费 m_0**

### **定义**
生产者向数据中介支付的**数据购买费用**（Data Purchase Fee）

### **特点**
- **时序**：Stage 5（支付结算），但在Stage 0中介已预判
- **决策者**：中介（设定价格）
- **支付方向**：生产者 → 中介
- **支付对象**：购买整个数据集的对价

### **定价机制**

#### **理论公式**（Proposition 1）
```python
# 论文理论公式
m_0 = (N/4) · G(Y_0)

其中：
  N = 消费者总数
  G(Y_0) = var[E[w_i | Y_0]] = 生产者的信息增益
         = 生产者对消费者支付意愿的后验期望方差
```

**理论依据**：
- 单个消费者的利润增量 = (1/4) · G(Y_0)
- 总利润增量 = N · (1/4) · G(Y_0)
- 中介作为垄断者，提取全部利润增量

**公式局限性**：
- 在 common_preferences 等特殊结构下可能退化
- var(E[w_i|Y_0]) = 0（所有人后验相同）→ m_0 = 0（但实际有价值）

#### **实证计算**（代码实现）
```python
# 当前代码实现
producer_profit_with_data = outcome_with_data.producer_profit
producer_profit_no_data = outcome_no_data.producer_profit

m_0 = max(0, producer_profit_with_data - producer_profit_no_data)
```

**计算逻辑**：
- 生产者从数据中获得的利润增量
- = 有数据时的利润 - 无数据baseline
- 中介可以提取这个全部增量（垄断）

**优点**：
- 适用于所有信息结构（包括退化情况）
- 直接反映数据的实际经济价值
- 与中介的实际收益对应

### **取值范围**
- **下界**：0（数据无价值）
- **上界**：理论上 N/4（完美信息）
- **典型值**：1-12（取决于参与率和信息结构）
- **实证值**：6.92（测试场景：N=20, m=1.0）

### **论文中的记号**
- **m_0**：生产者向中介支付的总费用
- **G(Y_0)**：生产者的信息增益

---

## 🏷️ **价格4：边际成本 c**

### **定义**
生产者生产一单位产品的**边际成本**（Marginal Cost）

### **特点**
- **时序**：外生参数（不变）
- **决策者**：无（技术参数）
- **取值**：通常假设 c = 0
- **用途**：定价公式中的基准

### **在定价中的作用**
```python
# 个性化定价
p_i = (μ_i + c) / 2

# 统一定价
max_p Σ (p - c) · q_i

# 生产者利润
π = Σ (p_i - c) · q_i
```

### **论文假设**
- 论文通常假设 **c = 0**（零边际成本）
- 代表数字产品/信息产品的典型特征
- 简化分析，不影响核心结论

### **代码实现**
```python
params.c = 0.0  # 默认值
```

---

## 📊 **价格之间的关系**

### **1. 产品市场均衡**
```python
# 消费者需求
q_i*(p_i) = max(μ_i^consumer - p_i, 0)

# 生产者最优定价
p_i* = argmax_p (p - c) · q_i*(p)
     = (μ_i^producer + c) / 2  （个性化）

# 购买决策
if p_i ≤ μ_i^consumer:
    购买 q_i > 0
else:
    不购买 q_i = 0
```

### **2. 数据市场均衡**
```python
# 消费者参与决策
a_i* = 1 if (ΔU_i + m) ≥ 0 else 0

其中：
  ΔU_i = E[效用|参与] - E[效用|拒绝]
  效用取决于产品价格 p_i

# 参与率均衡
r* = Pr(τ_i ≤ ΔU + m)
```

### **3. 中介利润**
```python
# 中介收入
收入 = m_0（向生产者卖数据）

# 中介支出
支出 = Σ_{i: a_i=1} m_i = m · r* · N（向消费者买数据）

# 中介利润
R = m_0 - m · r* · N
```

### **4. 价格传导机制**
```
m（数据补偿）↑
  ↓
r*（参与率）↑
  ↓
数据质量 ↑
  ↓
μ_i^producer（生产者后验）更准确
  ↓
p_i（产品价格）更精准
  ↓
π（生产者利润）↑
  ↓
m_0（数据购买费）↑
  ↓
R（中介利润）可能↑或↓（取决于 m_0 增量 vs 成本增量）
```

---

## 💡 **关键价格变量总结表**

| 变量 | 中文名称 | 决策者 | 支付方向 | 市场 | 典型值 | 论文记号 |
|------|---------|--------|---------|------|--------|---------|
| **p_i** | 产品价格 | 生产者 | 消费者→生产者 | 产品市场 | 2-3 | p_i (个性化)<br>p (统一) |
| **m_i** | 数据补偿 | 中介 | 中介→消费者 | 数据市场 | 0-3 | m_i<br>m (统一) |
| **m_0** | 数据购买费 | 中介 | 生产者→中介 | 数据市场 | 0-12 | m_0 |
| **c** | 边际成本 | - | - | 产品市场 | 0 | c |

---

## 🔍 **常见混淆点澄清**

### **混淆1：m_i vs m_0**
- **m_i**（小写，带下标）：中介向**消费者**支付（支出）
- **m_0**（小写，下标0）：中介向**生产者**收取（收入）
- **关系**：R = m_0 - Σm_i

### **混淆2：p_i vs m_i**
- **p_i**：产品价格（产品市场）
- **m_i**：数据补偿（数据市场）
- **不同市场**：产品市场 vs 数据市场

### **混淆3：价格 vs 效用**
- **价格**：货币支付（p_i, m_i, m_0, c）
- **效用**：消费者福利（u_i, U_i）
- **关系**：U_i = u_i + m_i（净效用包含补偿）

### **混淆4：个性化 vs 统一**
- **个性化**（identified）：p_i 因人而异
- **统一**（anonymized）：p 所有人相同
- **决定因素**：匿名化策略

---

## 📚 **论文章节对应**

| 价格变量 | 主要章节 | 关键公式/命题 |
|---------|---------|--------------|
| **p_i** | Section 2.3 | p_i = (μ_i + c)/2 |
| **m_i** | Section 2.3, Prop 3 | m_i* = (3/8)[G(X)-G(X_{-i})] |
| **m_0** | Section 3.3, Prop 1 | m_0 = (N/4)G(Y_0) |
| **c** | Section 2.2 | 外生参数，c=0 |

---

## 🎯 **代码中的对应**

```python
# src/scenarios/scenario_c_social_data.py

# 1. 边际成本（参数）
params.c = 0.0

# 2. 数据补偿（中介策略）
params.m = 1.0  # 外生给定或优化求解

# 3. 产品价格（生产者定价）
if params.anonymization == "identified":
    prices = (mu_producer + params.c) / 2  # 个性化
else:
    p_optimal, _ = compute_optimal_price_uniform(mu_producer, params.c)
    prices = np.full(N, p_optimal)  # 统一

# 4. 数据购买费（中介收入）
m_0 = max(0, producer_profit_with_data - producer_profit_no_data)

# 5. 中介利润
intermediary_profit = m_0 - params.m * num_participants
```

---

## ✅ **总结**

论文中的价格体系：

1. **p_i**（产品价格）：生产者向消费者收取，产品市场
2. **m_i**（数据补偿）：中介向消费者支付，数据市场（支出）
3. **m_0**（数据购买费）：中介向生产者收取，数据市场（收入）
4. **c**（边际成本）：生产者的成本参数，通常=0

**价格流动**：
```
消费者 --m_i--> 中介 --m_0--> 生产者
消费者 <--p_i-- 生产者
```

**中介利润**：
```
R = m_0 - Σm_i
  = 收入 - 支出
```

---

**文档版本**: v1.0  
**创建日期**: 2026-01-18  
**作者**: Claude (Sonnet 4.5)  
**用途**: 完整梳理论文中所有价格概念及其关系
